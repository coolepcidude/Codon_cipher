<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Codon Cipher Tool</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            min-height: 100vh;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            text-align: center;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            margin-bottom: 30px;
        }
        
        .mode-toggle {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }
        
        .toggle-button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            margin: 0 10px;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
        }
        
        .toggle-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .toggle-button.active {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .tables-container {
            margin: 20px 0;
            position: relative;
        }
        
        .mono-table-container {
            display: flex;
            justify-content: center;
        }
        
        .carousel-container {
            position: relative;
            max-width: 400px;
            margin: 0 auto;
            overflow: hidden;
            border-radius: 15px;
            background: rgba(0, 0, 0, 0.3);
        }
        
        .carousel-track {
            display: flex;
            transition: transform 0.3s ease;
            width: 300%;
        }
        
        .table-wrapper {
            text-align: center;
            width: 33.333%;
            flex-shrink: 0;
        }
        
        .table-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .codon-table {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 2px;
            background: #000;
            border: 2px solid #333;
            width: 350px;
            margin: 0 auto;
        }
        
        .cell {
            background: #000;
            color: white;
            padding: 8px;
            text-align: center;
            font-weight: bold;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #333;
        }
        
        .header-cell {
            background: #333;
            font-size: 16px;
        }
        
        .content-cell {
            flex-direction: column;
            font-size: 12px;
            line-height: 1.2;
        }
        
        .carousel-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            font-size: 24px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10;
        }
        
        .carousel-nav:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: translateY(-50%) scale(1.1);
        }
        
        .carousel-nav.prev {
            left: 10px;
        }
        
        .carousel-nav.next {
            right: 10px;
        }
        
        .carousel-indicators {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }
        
        .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .indicator.active {
            background: #667eea;
            transform: scale(1.2);
        }
        
        .tools {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }
        
        .tool-section {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        h3 {
            color: #fff;
            margin-top: 0;
            text-align: center;
        }
        
        textarea {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            box-sizing: border-box;
            height: 100px;
            resize: vertical;
        }
        
        .output {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            word-break: break-all;
            min-height: 50px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .instructions {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #667eea;
        }
        
        .error {
            color: #ff6b6b;
            font-weight: bold;
        }
        
        .character-count {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-size: 14px;
        }
        
        .tri-map-info {
            background: rgba(255, 215, 0, 0.1);
            border-left: 4px solid #ffd700;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 14px;
        }
        
        @media (max-width: 1200px) {
            .carousel-container {
                max-width: 350px;
            }
        }
        
        @media (max-width: 768px) {
            .tools {
                grid-template-columns: 1fr;
            }
            
            .codon-table {
                width: 280px;
                font-size: 10px;
            }
            
            .cell {
                min-height: 40px;
                padding: 5px;
            }
            
            .carousel-container {
                max-width: 300px;
            }
            
            .carousel-nav {
                width: 35px;
                height: 35px;
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🧬 Codon Cipher Tool</h1>
        
        <div class="mode-toggle">
            <button class="toggle-button active" id="monoBtn" onclick="switchMode('mono')">Mono-Map Cipher</button>
            <button class="toggle-button" id="triBtn" onclick="switchMode('tri')">Tri-Map Cipher</button>
        </div>
        
        <div class="instructions" id="instructions">
            <h3>Mono-Map Codon Cipher:</h3>
            <p><strong>Encoding format:</strong> [row][column][position] (e.g., 111 = A, 444 = space)</p>
            <p><strong>How it works:</strong> Uses one table for all characters. Each character gets the same code every time.</p>
        </div>
        
        <div class="character-count">
            📊 <strong>Complete Character Set:</strong> 26 Letters + 10 Digits + 27 Symbols + 1 Space = 64 Total Characters
        </div>
        
        <div class="tables-container" id="tablesContainer">
            <!-- Tables will be generated by JavaScript -->
        </div>
        
        <div class="tools">
            <div class="tool-section">
                <h3>🔒 Encoder</h3>
                <textarea id="plaintext" placeholder="Enter text to encode..."></textarea>
                <div class="output" id="encodedOutput">Encoded text will appear here...</div>
            </div>
            
            <div class="tool-section">
                <h3>🔓 Decoder</h3>
                <textarea id="ciphertext" placeholder="Enter cipher codes to decode (e.g., 111 112 113)..."></textarea>
                <div class="output" id="decodedOutput">Decoded text will appear here...</div>
            </div>
        </div>
    </div>

    <script>
        let currentMode = 'mono';
        let currentCarouselIndex = 0;

        const monoTable = {
            1: { 1: ['A', 'Q', '7', '+'], 2: ['B', 'R', '8', '-'], 3: ['C', 'S', '9', '*'], 4: ['D', 'T', '0', '/'] },
            2: { 1: ['E', 'U', '1', '='], 2: ['F', 'V', '2', '('], 3: ['G', 'W', '3', ')'], 4: ['H', 'X', '4', '['] },
            3: { 1: ['I', 'Y', '5', ']'], 2: ['J', 'Z', '6', '{'], 3: ['K', '!', '@', '}'], 4: ['L', '#', '$', '%'] },
            4: { 1: ['M', '^', '&', '<'], 2: ['N', '>', '?', ':'], 3: ['O', ';', '"', '\''], 4: ['P', ',', '.', ' '] }
        };

        const triTables = {
            A: {
                1: { 1: ['A', 'Q', '7', '+'], 2: ['B', 'R', '8', '-'], 3: ['C', 'S', '9', '*'], 4: ['D', 'T', '0', '/'] },
                2: { 1: ['E', 'U', '1', '='], 2: ['F', 'V', '2', '('], 3: ['G', 'W', '3', ')'], 4: ['H', 'X', '4', '['] },
                3: { 1: ['I', 'Y', '5', ']'], 2: ['J', 'Z', '6', '{'], 3: ['K', '!', '@', '}'], 4: ['L', '#', '$', '%'] },
                4: { 1: ['M', '^', '&', '<'], 2: ['N', '>', '?', ':'], 3: ['O', ';', '"', '\''], 4: ['P', ',', '.', ' '] }
            },
            B: {
                1: { 1: ['A', 'M', '4', '~'], 2: ['E', 'N', '3', '`'], 3: ['I', 'P', '2', '|'], 4: ['O', 'L', '1', '\\'] },
                2: { 1: ['U', 'K', '0', '_'], 2: ['Y', 'J', '9', '€'], 3: ['Q', 'H', '8', '¥'], 4: ['W', 'G', '7', '¢'] },
                3: { 1: ['R', 'F', '6', '£'], 2: ['T', 'D', '5', '§'], 3: ['S', 'C', '+', '©'], 4: ['V', 'B', '-', '®'] },
                4: { 1: ['X', 'Z', '*', '™'], 2: ['!', '@', '/', '±'], 3: ['#', '$', '=', '×'], 4: ['%', '^', '&', ' '] }
            },
            C: {
                1: { 1: ['A', 'Z', '&', '¿'], 2: ['Y', 'X', '%', '¡'], 3: ['W', 'V', '$', 'µ'], 4: ['U', 'T', '#', '¶'] },
                2: { 1: ['S', 'R', '@', '†'], 2: ['Q', 'P', '!', '‡'], 3: ['O', 'N', '0', '•'], 4: ['M', 'L', '9', '‰'] },
                3: { 1: ['K', 'J', '8', '‹'], 2: ['I', 'H', '7', '›'], 3: ['G', 'F', '6', '«'], 4: ['E', 'D', '5', '»'] },
                4: { 1: ['C', 'B', '4', '°'], 2: ['3', '2', '1', '•'], 3: ['=', '(', ')', '<'], 4: ['>', '[', ']', ' '] }
            }
        };

        let monoReverseTable = {};
        let triReverseTable = {A: {}, B: {}, C: {}};

        function createReverseTables() {
            monoReverseTable = {};
            for (let row = 1; row <= 4; row++) {
                for (let col = 1; col <= 4; col++) {
                    for (let pos = 1; pos <= 4; pos++) {
                        const char = monoTable[row][col][pos - 1];
                        monoReverseTable[char] = `${row}${col}${pos}`;
                    }
                }
            }

            ['A', 'B', 'C'].forEach(tableName => {
                triReverseTable[tableName] = {};
                for (let row = 1; row <= 4; row++) {
                    for (let col = 1; col <= 4; col++) {
                        for (let pos = 1; pos <= 4; pos++) {
                            const char = triTables[tableName][row][col][pos - 1];
                            triReverseTable[tableName][char] = `${row}${col}${pos}`;
                        }
                    }
                }
            });
        }

        function generateTable(tableData, title) {
            const wrapper = document.createElement('div');
            wrapper.className = 'table-wrapper';
            
            const titleEl = document.createElement('div');
            titleEl.className = 'table-title';
            titleEl.textContent = title;
            wrapper.appendChild(titleEl);
            
            const table = document.createElement('div');
            table.className = 'codon-table';
            
            const headerRow = ['', '1', '2', '3', '4'];
            headerRow.forEach(header => {
                const cell = document.createElement('div');
                cell.className = 'cell header-cell';
                cell.textContent = header;
                table.appendChild(cell);
            });

            for (let row = 1; row <= 4; row++) {
                const rowHeader = document.createElement('div');
                rowHeader.className = 'cell header-cell';
                rowHeader.textContent = row;
                table.appendChild(rowHeader);

                for (let col = 1; col <= 4; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell content-cell';
                    const chars = tableData[row][col];
                    const displayChars = chars.map(char => 
                        char === ' ' ? '(space)' : char
                    ).join('<br>');
                    cell.innerHTML = displayChars;
                    table.appendChild(cell);
                }
            }
            
            wrapper.appendChild(table);
            return wrapper;
        }

        function createCarousel() {
            const container = document.createElement('div');
            container.className = 'carousel-container';
            
            const track = document.createElement('div');
            track.className = 'carousel-track';
            track.id = 'carouselTrack';
            
            track.appendChild(generateTable(triTables.A, 'Table A'));
            track.appendChild(generateTable(triTables.B, 'Table B'));
            track.appendChild(generateTable(triTables.C, 'Table C'));
            
            container.appendChild(track);
            
            const prevBtn = document.createElement('button');
            prevBtn.className = 'carousel-nav prev';
            prevBtn.innerHTML = '❮';
            prevBtn.onclick = () => navigateCarousel(-1);
            
            const nextBtn = document.createElement('button');
            nextBtn.className = 'carousel-nav next';
            nextBtn.innerHTML = '❯';
            nextBtn.onclick = () => navigateCarousel(1);
            
            container.appendChild(prevBtn);
            container.appendChild(nextBtn);
            
            const indicators = document.createElement('div');
            indicators.className = 'carousel-indicators';
            indicators.id = 'carouselIndicators';
            
            for (let i = 0; i < 3; i++) {
                const indicator = document.createElement('div');
                indicator.className = `indicator ${i === 0 ? 'active' : ''}`;
                indicator.onclick = () => goToSlide(i);
                indicators.appendChild(indicator);
            }
            
            container.appendChild(indicators);
            container.style.cursor = 'grab';
            
            return container;
        }

        function navigateCarousel(direction) {
            currentCarouselIndex += direction;
            if (currentCarouselIndex < 0) currentCarouselIndex = 2;
            else if (currentCarouselIndex > 2) currentCarouselIndex = 0;
            updateCarousel();
        }

        function goToSlide(index) {
            currentCarouselIndex = index;
            updateCarousel();
        }

        function updateCarousel() {
            const track = document.getElementById('carouselTrack');
            const indicators = document.getElementById('carouselIndicators');
            
            if (track) {
                track.style.transform = `translateX(-${currentCarouselIndex * 33.333}%)`;
            }
            
            if (indicators) {
                const indicatorElements = indicators.children;
                for (let i = 0; i < indicatorElements.length; i++) {
                    indicatorElements[i].classList.toggle('active', i === currentCarouselIndex);
                }
            }
        }

        function switchMode(mode) {
            currentMode = mode;
            currentCarouselIndex = 0;
            
            document.getElementById('monoBtn').classList.toggle('active', mode === 'mono');
            document.getElementById('triBtn').classList.toggle('active', mode === 'tri');
            
            const instructions = document.getElementById('instructions');
            const tablesContainer = document.getElementById('tablesContainer');
            
            if (mode === 'mono') {
                instructions.innerHTML = `
                    <h3>Mono-Map Codon Cipher:</h3>
                    <p><strong>Encoding format:</strong> [row][column][position] (e.g., 111 = A, 444 = space)</p>
                    <p><strong>How it works:</strong> Uses one table for all characters. Each character gets the same code every time.</p>
                `;
                
                tablesContainer.innerHTML = '';
                tablesContainer.className = 'tables-container';
                const monoContainer = document.createElement('div');
                monoContainer.className = 'mono-table-container';
                monoContainer.appendChild(generateTable(monoTable, 'Table'));
                tablesContainer.appendChild(monoContainer);
                
            } else {
                instructions.innerHTML = `
                    <h3>Tri-Map Codon Cipher:</h3>
                    <p><strong>Encoding format:</strong> [row][column][position] (e.g., 111 = A, 444 = space)</p>
                    <p><strong>How it works:</strong> Uses three tables (A, B, C) that cycle for each character position.</p>
                    <div class="tri-map-info">
                        <strong>🔄 Table Cycling:</strong> Character 1→Table A, Character 2→Table B, Character 3→Table C, Character 4→Table A, etc.<br>
                        <strong>📌 Consistency:</strong> 111 = A and 444 = space on all tables.<br>
                        <strong>🎯 Navigation:</strong> Use arrows, indicators, or swipe to view different tables.
                    </div>
                `;
                
                tablesContainer.innerHTML = '';
                tablesContainer.className = 'tables-container';
                tablesContainer.appendChild(createCarousel());
            }
            
            encodeText();
            decodeText();
        }

        function encodeText() {
            const plaintext = document.getElementById('plaintext').value.toUpperCase();
            const output = document.getElementById('encodedOutput');
            
            if (!plaintext.trim()) {
                output.innerHTML = 'Encoded text will appear here...';
                return;
            }

            let encoded = [];
            let unknownChars = [];

            for (let i = 0; i < plaintext.length; i++) {
                const char = plaintext[i];
                let code = null;

                if (currentMode === 'mono') {
                    code = monoReverseTable[char];
                } else {
                    const tableNames = ['A', 'B', 'C'];
                    const tableName = tableNames[i % 3];
                    code = triReverseTable[tableName][char];
                }

                if (code) {
                    encoded.push(code);
                } else {
                    encoded.push('[?]');
                    if (!unknownChars.includes(char)) {
                        unknownChars.push(char);
                    }
                }
            }

            let result = encoded.join(' ');
            if (unknownChars.length > 0) {
                result += '\n\n⚠️ Unknown characters (marked as [?]): ' + unknownChars.join(', ');
            }

            output.textContent = result;
        }

        function decodeText() {
            const ciphertext = document.getElementById('ciphertext').value.trim();
            const output = document.getElementById('decodedOutput');
            
            if (!ciphertext) {
                output.innerHTML = 'Decoded text will appear here...';
                return;
            }

            const codes = ciphertext.split(/\s+/).filter(code => code.length > 0);
            let decoded = '';
            let errors = [];

            for (let i = 0; i < codes.length; i++) {
                const code = codes[i];
                
                if (code === '[?]') {
                    decoded += '?';
                    continue;
                }

                if (code.length !== 3 || !/^\d{3}$/.test(code)) {
                    errors.push(`Invalid code format: "${code}" (position ${i + 1})`);
                    decoded += '?';
                    continue;
                }

                const row = parseInt(code[0]);
                const col = parseInt(code[1]);
                const pos = parseInt(code[2]);

                if (row < 1 || row > 4 || col < 1 || col > 4 || pos < 1 || pos > 4) {
                    errors.push(`Invalid coordinates: "${code}" (position ${i + 1})`);
                    decoded += '?';
                    continue;
                }

                let char = null;
                
                if (currentMode === 'mono') {
                    char = monoTable[row][col][pos - 1];
                } else {
                    const tableNames = ['A', 'B', 'C'];
                    const tableName = tableNames[i % 3];
                    char = triTables[tableName][row][col][pos - 1];
                }

                decoded += char;
            }

            let result = decoded;
            if (errors.length > 0) {
                result += '\n\n⚠️ Decoding errors:\n' + errors.join('\n');
            }

            output.textContent = result;
        }

        createReverseTables();
        switchMode('mono');

        document.getElementById('plaintext').addEventListener('input', encodeText);
        document.getElementById('ciphertext').addEventListener('input', decodeText);
    </script>
</body>
</html>
